"use strict";importScripts("/javascripts/workbox/workbox-sw.js"),workbox.setConfig({modulePathPrefix:"/javascripts/workbox",debug:!1});var cacheVersion="1";workbox.routing.registerRoute(new RegExp(".*?"),new workbox.strategies.NetworkFirst({cacheName:"discourse-"+cacheVersion,plugins:[new workbox.expiration.Plugin({maxAgeSeconds:604800,maxEntries:500,purgeOnQuotaError:!0})]}));var idleThresholdTime=1e4,lastAction=-1;function isIdle(){return lastAction+idleThresholdTime<Date.now()}function showNotification(t,i,e,o,n,a,s){var r={body:i,icon:e,badge:o,data:{url:s,baseUrl:a},tag:n};return self.registration.showNotification(t,r)}self.addEventListener("push",function(t){var i=t.data.json();if(!isIdle()&&i.hide_when_active)return!1;t.waitUntil(self.registration.getNotifications({tag:i.tag}).then(function(t){return t&&0<t.length&&t.forEach(function(t){t.close()}),showNotification(i.title,i.body,i.icon,i.badge,i.tag,i.base_url,i.url)}))}),self.addEventListener("notificationclick",function(t){t.notification.close();var i=t.notification.data.url,e=t.notification.data.baseUrl;t.waitUntil(clients.matchAll({type:"window"}).then(function(t){if(!t.some(function(t){return t.url===e+i&&"focus"in t?(t.focus(),!0):"postMessage"in t&&"focus"in t&&(t.focus(),t.postMessage({url:i}),!0)})&&clients.openWindow)return clients.openWindow(e+i)}))}),self.addEventListener("message",function(t){"lastAction"in t.data&&(lastAction=t.data.lastAction)});
//# sourceMappingURL=/assets/service-worker-29f380effd40cdaa98cfa88ea74b0c66ba6ca6c901f666253c7592d49fa5e7d4.js.map